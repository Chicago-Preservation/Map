<!DOCTYPE html>
<html>

  {% include head.html %}

  <body>

  	{% include sidebar.html %}
  	   <script>
  	    window.onload = function(){
        if (localStorage['selectedtem'] != undefined){
          new_map();
        } else {
		new_map('{{site.marker-grouping}}');
        }
        reloadhtml();
  	    };
	      window.onhashchange = function() {
        reloadhtml();
	      };
  	    </script>

    <div id="map"> </div>

    <script>
    // Initialize map
    map = L.map('map', {scrollWheelZoom: false}).setView([41.8781, -87.6298], 12);

    // Add base layer (ESRI Gray Light)
    L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}', {
        attribution: 'Â© ESRI',
        minZoom: 0,
        maxZoom: 20
    }).addTo(map);

    // GeoJSON Layers
    var landmarksLayer = L.geoJSON(null, {
        onEachFeature: function (feature, layer) {
            layer.bindPopup('<strong>' + feature.properties.title + '</strong>');
        }
    });
    fetch('https://profrovner.github.io/antimonumentalchicago/individuallandmarks.geojson')
        .then(response => response.json())
        .then(data => landmarksLayer.addData(data));

    var communityAreasLayer = L.geoJSON(null, {
        onEachFeature: function (feature, layer) {
            layer.bindPopup('<strong>' + feature.properties.title + '</strong>');
        }
    });
    fetch('https://profrovner.github.io/antimonumentalchicago/boundaries.geojson')
        .then(response => response.json())
        .then(data => communityAreasLayer.addData(data));

    var monumentsLayer = L.geoJSON(null, {
        onEachFeature: function (feature, layer) {
            layer.bindPopup('<strong>' + feature.properties.title + '</strong>');
        }
    });
    fetch('https://profrovner.github.io/antimonumentalchicago/monuments.geojson')
        .then(response => response.json())
        .then(data => monumentsLayer.addData(data));

    // Create a separate control for GeoJSON layers
    var geojsonLayerControl = {
        "Landmarks": landmarksLayer,
        "Community Areas": communityAreasLayer,
        "Monuments": monumentsLayer
    };

    L.control.layers(null, geojsonLayerControl, { position: 'topright', collapsed: false }).addTo(map);

    // Add your category-based layers separately (if needed)
    var categoryLayer1 = L.layerGroup();  // Example
    var categoryLayer2 = L.layerGroup();  // Example

    var categoryControl = {
        "Category 1": categoryLayer1,
        "Category 2": categoryLayer2
    };

    L.control.layers(null, categoryControl, { position: 'topleft', collapsed: true }).addTo(map);

    </script>

    {% include menu.html %}
    {% include dropdown.html %}
  </body>
</html>

