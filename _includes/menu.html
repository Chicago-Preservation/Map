<!-- New Navigation Menu -->
<div class="new-navigation-menu">
    <!-- Main Menu Button -->
    <button class="new-menu-button" id="new-menu-toggle">
        <i class="fa fa-bars" aria-hidden="true"></i>
    </button>

    <!-- Navigation Dropdown -->
    <div class="new-menu-dropdown" id="new-menu-dropdown">
        <div class="new-menu-header">
            <span class="new-menu-title">Navigation</span>
            <button class="new-menu-close" id="new-menu-close">
                <i class="fa fa-times" aria-hidden="true"></i>
            </button>
        </div>
        
        <div class="new-menu-links">
            <!-- Home -->
            <a href="{{site.baseurl}}/#home/" class="new-menu-link" data-page="home">
                <i class="fa fa-home"></i>
                <span>Home</span>
            </a>
            
            <!-- Academic Programs -->
            <a href="{{site.baseurl}}/#Academic_Programs/" class="new-menu-link" data-page="Academic_Programs">
                <i class="fa fa-graduation-cap"></i>
                <span>Academic Programs</span>
            </a>
            
            <!-- Governing Resources -->
            <a href="{{site.baseurl}}/#Governing_Resources/" class="new-menu-link" data-page="Governing_Resources">
                <i class="fa fa-building"></i>
                <span>Governing Resources</span>
            </a>
            
            <!-- Additional Resources -->
            <a href="{{site.baseurl}}/#Additional_Resources/" class="new-menu-link" data-page="Additional_Resources">
                <i class="fa fa-info-circle"></i>
                <span>Additional Resources</span>
            </a>
            
            <!-- Inquiries and Contributions -->
            <a href="{{site.baseurl}}/#inquiry/" class="new-menu-link" data-page="inquiry">
                <i class="fa fa-envelope"></i>
                <span>Inquiries & Contributions</span>
            </a>
            
            <!-- Help Us Improve -->
            <a href="{{site.baseurl}}/#User_Feedback_Survey/" class="new-menu-link" data-page="User_Feedback_Survey">
                <i class="fa fa-comment"></i>
                <span>Help Us Improve</span>
            </a>
            
            <!-- Scholar Share -->
            <a href="{{site.baseurl}}/#Scholar_Share/" class="new-menu-link" data-page="Scholar_Share">
                <i class="fa fa-share-alt"></i>
                <span>Scholar Share</span>
            </a>
        </div>
    </div>
</div>

<script>
// New Navigation Menu JavaScript
document.addEventListener('DOMContentLoaded', function() {
    const menuToggle = document.getElementById('new-menu-toggle');
    const menuDropdown = document.getElementById('new-menu-dropdown');
    const menuClose = document.getElementById('new-menu-close');
    const menuLinks = document.querySelectorAll('.new-menu-link');
    
    // Toggle menu visibility
    function toggleMenu() {
        const isVisible = menuDropdown.style.display === 'block';
        menuDropdown.style.display = isVisible ? 'none' : 'block';
        
        // Add/remove active class for styling
        if (!isVisible) {
            menuDropdown.classList.add('active');
        } else {
            menuDropdown.classList.remove('active');
        }
    }
    
    // Close menu
    function closeMenu() {
        menuDropdown.style.display = 'none';
        menuDropdown.classList.remove('active');
    }
    
    // Event listeners
    menuToggle.addEventListener('click', function(e) {
        e.stopPropagation();
        toggleMenu();
    });
    
    menuClose.addEventListener('click', function(e) {
        e.stopPropagation();
        closeMenu();
    });
    
    // Close menu when clicking outside
    document.addEventListener('click', function(e) {
        if (!menuDropdown.contains(e.target) && !menuToggle.contains(e.target)) {
            closeMenu();
        }
    });
    
    // Handle menu link clicks
    menuLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            
            const pageUrl = this.getAttribute('href');
            const pageName = this.getAttribute('data-page');
            
            console.log('Navigating to:', pageName);
            
            // Close menu
            closeMenu();
            
            // Navigate to page
            if (pageName === 'home') {
                // Handle home page specially
                const homeUrl = window.location.origin + window.location.pathname + 'home/';
                pagerender(homeUrl);
                window.location.hash = '/home';
            } else {
                // Handle other pages
                const pageUrl = window.location.origin + window.location.pathname + pageName + '/';
                pagerender(pageUrl);
                window.location.hash = '/' + pageName;
            }
        });
    });
    
    // Initialize menu state
    menuDropdown.style.display = 'none';
    
    console.log('âœ… New navigation menu initialized');
});

// Ensure pagerender function is available globally
if (typeof pagerender === 'undefined') {
    window.pagerender = function(page_url) {
        $.get(page_url, function(data) {
            $("#sidebar-content").html(data);
        });
        if (typeof map !== 'undefined') {
            map.closePopup();
        }
        $(".sidebar").scrollTop(0);
    };
}
</script>
